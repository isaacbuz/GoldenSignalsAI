{"ast":null,"code":"import _objectSpread from\"/Users/isaacbuz/Documents/Projects/GoldenSignalsAI/presentation/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";// AdminBacktest.js\n// Robust backtesting UI for the admin panel\nimport React,{useState}from'react';import API_URL from'./config';import{Line}from'react-chartjs-2';import'chart.js/auto';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function AdminBacktest(){var _result$sharpe_ratio,_result$trades;const[symbol,setSymbol]=useState('AAPL');const[result,setResult]=useState(null);const[loading,setLoading]=useState(false);const[error,setError]=useState('');const[history,setHistory]=useState([]);const handleBacktest=async()=>{setLoading(true);setError('');setResult(null);setHistory([]);try{const jwt=localStorage.getItem('jwt_token');const res=await fetch(\"\".concat(API_URL,\"/backtest\"),{method:'POST',headers:_objectSpread({'Content-Type':'application/json'},jwt?{Authorization:\"Bearer \".concat(jwt)}:{}),body:JSON.stringify({symbol})});if(!res.ok)throw new Error('Backtest failed');const data=await res.json();setResult(data.backtest_result);if(data.backtest_result&&data.backtest_result.equity_curve){setHistory(data.backtest_result.equity_curve);}}catch(err){setError(err.message||'Error running backtest');}setLoading(false);};// Chart data for equity curve\nconst chartData={labels:history.map((pt,i)=>i),datasets:[{label:'Equity Curve',data:history.map(pt=>pt.equity),fill:false,borderColor:'#1976d2',backgroundColor:'#2196f3',tension:0.1}]};return/*#__PURE__*/_jsxs(\"div\",{className:\"admin-backtest\",style:{maxWidth:600,margin:'0 auto'},children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Backtesting\"}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:12},children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"backtest-symbol\",children:\"Symbol:\"}),/*#__PURE__*/_jsx(\"input\",{id:\"backtest-symbol\",type:\"text\",value:symbol,onChange:e=>setSymbol(e.target.value.toUpperCase()),style:{width:120,padding:6,borderRadius:4,border:'1px solid #333'},placeholder:\"e.g. AAPL\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleBacktest,disabled:loading||!symbol,style:{padding:'6px 18px'},children:loading?'Running...':'Run Backtest'})]}),error&&/*#__PURE__*/_jsx(\"div\",{style:{color:'red',marginTop:8},children:error}),result&&/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:24},children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Summary\"}),/*#__PURE__*/_jsxs(\"ul\",{children:[/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Total Return:\"}),\" \",result.total_return?(result.total_return*100).toFixed(2)+'%':'N/A']}),/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Sharpe Ratio:\"}),\" \",(_result$sharpe_ratio=result.sharpe_ratio)!==null&&_result$sharpe_ratio!==void 0?_result$sharpe_ratio:'N/A']}),/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Max Drawdown:\"}),\" \",result.max_drawdown?(result.max_drawdown*100).toFixed(2)+'%':'N/A']}),/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Trades:\"}),\" \",(_result$trades=result.trades)!==null&&_result$trades!==void 0?_result$trades:'N/A']})]})]}),history.length>0&&/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:24},children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Equity Curve\"}),/*#__PURE__*/_jsx(Line,{data:chartData,options:{plugins:{legend:{display:true}}}})]})]});}export default AdminBacktest;","map":{"version":3,"names":["React","useState","API_URL","Line","jsx","_jsx","jsxs","_jsxs","AdminBacktest","_result$sharpe_ratio","_result$trades","symbol","setSymbol","result","setResult","loading","setLoading","error","setError","history","setHistory","handleBacktest","jwt","localStorage","getItem","res","fetch","concat","method","headers","_objectSpread","Authorization","body","JSON","stringify","ok","Error","data","json","backtest_result","equity_curve","err","message","chartData","labels","map","pt","i","datasets","label","equity","fill","borderColor","backgroundColor","tension","className","style","maxWidth","margin","children","display","alignItems","gap","htmlFor","id","type","value","onChange","e","target","toUpperCase","width","padding","borderRadius","border","placeholder","onClick","disabled","color","marginTop","total_return","toFixed","sharpe_ratio","max_drawdown","trades","length","options","plugins","legend"],"sources":["/Users/isaacbuz/Documents/Projects/GoldenSignalsAI/presentation/frontend/src/AdminBacktest.js"],"sourcesContent":["// AdminBacktest.js\n// Robust backtesting UI for the admin panel\nimport React, { useState } from 'react';\nimport API_URL from './config';\nimport { Line } from 'react-chartjs-2';\nimport 'chart.js/auto';\n\nfunction AdminBacktest() {\n  const [symbol, setSymbol] = useState('AAPL');\n  const [result, setResult] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n  const [history, setHistory] = useState([]);\n\n  const handleBacktest = async () => {\n    setLoading(true);\n    setError('');\n    setResult(null);\n    setHistory([]);\n    try {\n      const jwt = localStorage.getItem('jwt_token');\n      const res = await fetch(`${API_URL}/backtest`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          ...(jwt ? { Authorization: `Bearer ${jwt}` } : {})\n        },\n        body: JSON.stringify({ symbol })\n      });\n      if (!res.ok) throw new Error('Backtest failed');\n      const data = await res.json();\n      setResult(data.backtest_result);\n      if (data.backtest_result && data.backtest_result.equity_curve) {\n        setHistory(data.backtest_result.equity_curve);\n      }\n    } catch (err) {\n      setError(err.message || 'Error running backtest');\n    }\n    setLoading(false);\n  };\n\n  // Chart data for equity curve\n  const chartData = {\n    labels: history.map((pt, i) => i),\n    datasets: [\n      {\n        label: 'Equity Curve',\n        data: history.map(pt => pt.equity),\n        fill: false,\n        borderColor: '#1976d2',\n        backgroundColor: '#2196f3',\n        tension: 0.1,\n      },\n    ],\n  };\n\n  return (\n    <div className=\"admin-backtest\" style={{ maxWidth: 600, margin: '0 auto' }}>\n      <h3>Backtesting</h3>\n      <div style={{ display: 'flex', alignItems: 'center', gap: 12 }}>\n        <label htmlFor=\"backtest-symbol\">Symbol:</label>\n        <input\n          id=\"backtest-symbol\"\n          type=\"text\"\n          value={symbol}\n          onChange={e => setSymbol(e.target.value.toUpperCase())}\n          style={{ width: 120, padding: 6, borderRadius: 4, border: '1px solid #333' }}\n          placeholder=\"e.g. AAPL\"\n        />\n        <button onClick={handleBacktest} disabled={loading || !symbol} style={{ padding: '6px 18px' }}>\n          {loading ? 'Running...' : 'Run Backtest'}\n        </button>\n      </div>\n      {error && <div style={{ color: 'red', marginTop: 8 }}>{error}</div>}\n      {result && (\n        <div style={{ marginTop: 24 }}>\n          <h4>Summary</h4>\n          <ul>\n            <li><b>Total Return:</b> {result.total_return ? (result.total_return * 100).toFixed(2) + '%' : 'N/A'}</li>\n            <li><b>Sharpe Ratio:</b> {result.sharpe_ratio ?? 'N/A'}</li>\n            <li><b>Max Drawdown:</b> {result.max_drawdown ? (result.max_drawdown * 100).toFixed(2) + '%' : 'N/A'}</li>\n            <li><b>Trades:</b> {result.trades ?? 'N/A'}</li>\n          </ul>\n        </div>\n      )}\n      {history.length > 0 && (\n        <div style={{ marginTop: 24 }}>\n          <h4>Equity Curve</h4>\n          <Line data={chartData} options={{ plugins: { legend: { display: true } } }} />\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default AdminBacktest;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}